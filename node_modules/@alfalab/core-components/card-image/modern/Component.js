import React, { useState, useRef, useCallback } from 'react';
import cn from 'classnames';

var styles = {"cardImage":"card-image__cardImage_5qhyi","rounded":"card-image__rounded_5qhyi","image":"card-image__image_5qhyi","loaded":"card-image__loaded_5qhyi"};
require('./index.css');

const ASPECT_RATIO = 0.63;
const DEFAULT_WIDTH = 280;
const DEFAULT_BASE_URL = 'https://online.alfabank.ru/cards-images/cards/';
const CardImage = ({ cardId, layers = 'BACKGROUND,CARD_NUMBER,CARD_HOLDER,PAY_PASS,CHIP,LOGO,PAYMENT_SYSTEM,RESERVED_1,RESERVED_2,VALID_DATE', width = DEFAULT_WIDTH, baseUrl = DEFAULT_BASE_URL, rounded = true, alt, id, dataTestId, onLoad, className, }) => {
    const [loaded, setLoaded] = useState(false);
    const image = useRef(null);
    const height = width * ASPECT_RATIO;
    const handleLoadedImage = useCallback(() => {
        setLoaded(true);
        if (onLoad) {
            onLoad();
        }
    }, [onLoad]);
    const cardImageUrl = `${baseUrl}${cardId}/images?layers=${layers}&width=${width}`;
    const cardImageUrl2x = `${baseUrl}${cardId}/images?layers=${layers}&width=${width * 2}`;
    return (React.createElement("div", { className: cn(styles.cardImage, rounded && styles.rounded, loaded && styles.loaded, className), style: {
            width,
            height,
        }, id: id, "data-test-id": dataTestId }, cardId && (React.createElement("img", { ref: image, className: styles.image, width: width, height: height, src: cardImageUrl, srcSet: `${cardImageUrl2x} 2x`, alt: alt, role: 'presentation', onLoad: handleLoadedImage }))));
};

export { ASPECT_RATIO, CardImage, DEFAULT_BASE_URL, DEFAULT_WIDTH };
