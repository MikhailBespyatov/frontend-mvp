import { formatAmount } from '@alfalab/utils';

/**
 * https://github.com/alfa-laboratory/utils
 * TODO: нужно перенести утилиты в этот проект, когда он будет готов
 */
/**
 * Форматирует введенное значение
 * @param enteredValue Значение введенное в инпут
 * @param currency валюта
 * @param minority количество минорных единиц
 */
function getFormattedValue(enteredValue, currency, minority) {
    const [head, tail] = enteredValue.split(',');
    const { majorPart } = formatAmount({
        value: Number(head) * minority,
        currency,
        minority,
    });
    if (!enteredValue) {
        return enteredValue;
    }
    if (!tail && enteredValue.includes(',')) {
        return majorPart.concat(',');
    }
    if (tail) {
        return majorPart.concat(',', tail.slice(0, minority.toString().length - 1));
    }
    return majorPart;
}
function getAmountValueFromStr(str, minority) {
    return str === ''
        ? null
        : Math.round(Number(str.replace(',', '.').replace(/[^0-9.]/g, '')) * minority);
}

export { getAmountValueFromStr, getFormattedValue };
