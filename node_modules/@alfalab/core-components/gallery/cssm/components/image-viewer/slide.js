Object.defineProperty(exports, '__esModule', { value: true });

var React = require('react');
var cn = require('classnames');
var utils_utils = require('../../utils/utils.js');
var utils_constants = require('../../utils/constants.js');
var coreComponentsTypography = require('../../../../typography/cssm');
var styles = require('./index.module.css');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var React__default = /*#__PURE__*/_interopDefaultLegacy(React);
var cn__default = /*#__PURE__*/_interopDefaultLegacy(cn);
var styles__default = /*#__PURE__*/_interopDefaultLegacy(styles);

var Slide = function (_a) {
    var _b;
    var isActive = _a.isActive, meta = _a.meta, swiperAspectRatio = _a.swiperAspectRatio, imageAspectRatio = _a.imageAspectRatio, image = _a.image, index = _a.index, swiperHeight = _a.swiperHeight, slideVisible = _a.slideVisible, handleLoad = _a.handleLoad, handleLoadError = _a.handleLoadError;
    var broken = Boolean(meta === null || meta === void 0 ? void 0 : meta.broken);
    var small = utils_utils.isSmallImage(meta);
    var verticalImageFit = !small && swiperAspectRatio > imageAspectRatio;
    var horizontalImageFit = !small && swiperAspectRatio <= imageAspectRatio;
    return (React__default['default'].createElement(SlideInner, { active: isActive, broken: broken, loading: !meta, withPlaceholder: small || broken },
        React__default['default'].createElement("img", { src: image.src, alt: utils_utils.getImageAlt(image, index), className: cn__default['default']((_b = {},
                _b[styles__default['default'].smallImage] = small,
                _b[styles__default['default'].image] = !small,
                _b[styles__default['default'].verticalImageFit] = verticalImageFit,
                _b[styles__default['default'].horizontalImageFit] = horizontalImageFit,
                _b)), onLoad: function (event) { return handleLoad(event, index); }, onError: function () { return handleLoadError(index); }, style: {
                maxHeight: swiperHeight + "px",
            }, "data-test-id": slideVisible ? utils_constants.TestIds.ACTIVE_IMAGE : undefined })));
};
var SlideInner = function (_a) {
    var _b;
    var children = _a.children, broken = _a.broken, loading = _a.loading, withPlaceholder = _a.withPlaceholder;
    var content = broken ? (React__default['default'].createElement("div", { className: styles__default['default'].brokenImgWrapper },
        React__default['default'].createElement("div", { className: styles__default['default'].brokenImgIcon }),
        React__default['default'].createElement(coreComponentsTypography.Typography.Text, { view: 'primary-small', color: 'secondary' }, "\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044C \u0438\u0437\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435"))) : (children);
    return (React__default['default'].createElement("div", { className: cn__default['default'](styles__default['default'].slide, (_b = {}, _b[styles__default['default'].slideLoading] = loading, _b)) }, withPlaceholder ? React__default['default'].createElement("div", { className: styles__default['default'].placeholder }, content) : content));
};

exports.Slide = Slide;
