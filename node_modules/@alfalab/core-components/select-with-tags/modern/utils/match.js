import { isGroup } from '../../../select/modern';

const defaultMatch = (option, inputValue) => option.value.toLowerCase().indexOf((inputValue || '').toLowerCase(), 0) !== -1;
const optionsIsGroupShapes = (options) => {
    const item = options[0];
    if (!item) {
        return false;
    }
    return isGroup(item);
};
const filterOptions = (options, inputValue, math = defaultMatch) => {
    if (optionsIsGroupShapes(options)) {
        return options.reduce((acc, group) => {
            const matchedOptions = group.options.filter(option => math(option, inputValue));
            if (matchedOptions.length > 0) {
                acc.push({ ...group, options: matchedOptions });
                return acc;
            }
            return acc;
        }, []);
    }
    return options.filter(option => math(option, inputValue));
};

export { filterOptions };
