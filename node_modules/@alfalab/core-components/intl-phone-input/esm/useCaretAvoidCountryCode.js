import { useCallback, useEffect } from 'react';

function useCaretAvoidCountryCode(_a) {
    var inputRef = _a.inputRef, countryCodeLength = _a.countryCodeLength, clearableCountryCode = _a.clearableCountryCode;
    var input = inputRef.current;
    var moveCaretFromCountryCode = useCallback(function () {
        if (!input)
            return;
        var selectionStart = input.selectionStart || 0;
        if (selectionStart < countryCodeLength) {
            input.focus();
            input.setSelectionRange(countryCodeLength, countryCodeLength);
        }
    }, [input, countryCodeLength]);
    var preventCaretMovingOnCountryCode = useCallback(function (event) {
        if (!input)
            return;
        var selectionStart = input.selectionStart || 0;
        var toLeftKey = event.keyCode === 37;
        if (toLeftKey && selectionStart <= countryCodeLength) {
            event.preventDefault();
        }
    }, [input, countryCodeLength]);
    useEffect(function () {
        if (!input || clearableCountryCode)
            return;
        input.addEventListener('click', moveCaretFromCountryCode);
        input.addEventListener('keydown', preventCaretMovingOnCountryCode);
        // eslint-disable-next-line consistent-return
        return function () {
            input.removeEventListener('click', moveCaretFromCountryCode);
            input.removeEventListener('keydown', preventCaretMovingOnCountryCode);
        };
    }, [clearableCountryCode, input, preventCaretMovingOnCountryCode, moveCaretFromCountryCode]);
}

export { useCaretAvoidCountryCode };
